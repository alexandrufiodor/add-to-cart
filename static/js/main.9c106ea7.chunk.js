(this["webpackJsonpebs-fe-junior"]=this["webpackJsonpebs-fe-junior"]||[]).push([[0],{12:function(e,t,a){e.exports={nav:"Nav_nav__20OOG",navItem:"Nav_navItem__28r94",active:"Nav_active__3zEoj"}},28:function(e,t,a){e.exports=a(38)},38:function(e,t,a){"use strict";a.r(t);var n,r=a(0),c=a.n(r),l=a(16),u=a.n(l),o=a(23),i=function(){return fetch("http://localhost:3001/api/products/").then((function(e){return e}))};!function(e){e.FETCH_PRODUCTS_BEGIN="FETCH-PRODUCTS-BEGIN",e.FETCH_PRODUCTS_SUCCESS="FETCH-PRODUCTS-SUCCESS",e.FETCH_PRODUCTS_FAILURE="FETCH-PRODUCTS-FAILURE",e.SORT_BY_CATEGORY="ORDER-BY-CATEGORY-ASC",e.SORT_BY_PRICE="SORT-BY-PRICE"}(n||(n={}));var s=function(e,t){return{type:n.SORT_BY_CATEGORY,payload:{products:e,sortKey:t}}},d=function(e,t){return{type:n.SORT_BY_PRICE,payload:{products:e,sortKey:t}}};function m(){return function(e){return e({type:n.FETCH_PRODUCTS_BEGIN}),i().then(C).then((function(e){return e.json()})).then((function(t){var a;return e((a=t,{type:n.FETCH_PRODUCTS_SUCCESS,payload:{products:a}})),t})).catch((function(t){return e(function(e){return{type:n.FETCH_PRODUCTS_FAILURE,payload:{error:e}}}(t))}))}}function C(e){if(!e.ok)throw Error(e.statusText);return e}var E,b=a(9),p=a(6),O=a.n(p);!function(e){e.ADD_TO_CART="ADD-TO-CART",e.REMOVE_FROM_CART="REMOVE-FROM-CART",e.UPDATE_CART_QUANTITY="UPDATE-CART-QUANTITY"}(E||(E={}));var f=function(){var e=Object(r.useState)(!0),t=Object(o.a)(e,2),a=t[0],n=t[1],l=Object(r.useState)(!0),u=Object(o.a)(l,2),i=u[0],C=u[1],p=Object(b.c)((function(e){return e.fetch_products})),f=Object(b.b)();Object(r.useEffect)((function(){f(m())}),[]);var _=Object(r.useCallback)((function(e,t){f(function(e,t){return{type:E.ADD_TO_CART,payload:{product:e,productId:t,quantity:1}}}(e,t))}),[]),y=Object(r.useCallback)((function(){f(s(p.items,"asc")),n(!1)}),[p.items]),T=Object(r.useCallback)((function(){f(s(p.items,"desc")),n(!0)}),[p.items]),R=Object(r.useCallback)((function(){f(d(p.items,"asc")),C(!1)}),[p.items]),v=Object(r.useCallback)((function(){f(d(p.items,"desc")),C(!0)}),[p.items]);return c.a.createElement("div",null,c.a.createElement("table",{className:O.a.table},c.a.createElement("thead",null,c.a.createElement("tr",null,a?c.a.createElement("th",{className:O.a.tableCell,onClick:function(){return y()}},"Category \u2191"):c.a.createElement("th",{className:O.a.tableCell,onClick:function(){return T()}},"Category \u2193"),c.a.createElement("th",{className:O.a.tableCell},"Name"),i?c.a.createElement("th",{className:O.a.tableCell,onClick:function(){return R()}},"Price \u2191"):c.a.createElement("th",{className:O.a.tableCell,onClick:function(){return v()}},"Price \u2193"),c.a.createElement("th",{className:O.a.tableCell},"Actions"))),c.a.createElement("tbody",null,p.items.map((function(e){return c.a.createElement("tr",{key:e.id},c.a.createElement("td",{className:O.a.tableCell,key:e.category.id},e.category.name),c.a.createElement("td",{className:O.a.tableCell},e.name),c.a.createElement("td",{className:O.a.tableCell},"$",e.price),c.a.createElement("td",{className:O.a.tableCell},c.a.createElement("button",{onClick:function(){_(e,e.id)}},"Add to Cart")))})))))},_=a(15),y=a(12),T=a.n(y),R=function(){return c.a.createElement("nav",{className:T.a.nav},c.a.createElement("div",{className:T.a.navItem},c.a.createElement(_.b,{activeClassName:T.a.active,to:"/products"},"All Products")),c.a.createElement("div",{className:T.a.navItem},c.a.createElement(_.b,{activeClassName:T.a.active,to:"/cart/"},"Cart")))},v=a(1),j=a(7),N=a.n(j),A=function(){var e=Object(b.c)((function(e){return e.cart})),t=Object(b.b)(),a=Object(r.useCallback)((function(e,a){t(function(e,t){return{type:E.UPDATE_CART_QUANTITY,payload:{productId:e,quantity:t}}}(e,a))}),[t]),n=Object(r.useCallback)((function(e,a){t(function(e,t){return{type:E.REMOVE_FROM_CART,payload:{productId:e,quantity:t}}}(e,a))}),[]);return c.a.createElement("div",null,c.a.createElement("table",{className:N.a.table},c.a.createElement("thead",null,c.a.createElement("tr",null,c.a.createElement("th",{className:N.a.tableCell},"Category"),c.a.createElement("th",{className:N.a.tableCell},"Name"),c.a.createElement("th",{className:N.a.tableCell},"Price"),c.a.createElement("th",{className:N.a.tableCell},"Quantity"),c.a.createElement("th",{className:N.a.tableCell},"Actions"))),c.a.createElement("tbody",null,e.cart.map((function(e){return c.a.createElement("tr",{key:e.product.id},c.a.createElement("td",{className:N.a.tableCell,key:e.product.category.id},e.product.category.name),c.a.createElement("td",{className:N.a.tableCell},e.product.name),c.a.createElement("td",{className:N.a.tableCell},"$",(e.product.price*e.quantity).toFixed(2)),c.a.createElement("td",{className:N.a.tableCell},e.quantity),c.a.createElement("td",{className:N.a.tableCell},c.a.createElement("button",{onClick:function(){n(e.product.id,e.quantity)}},"-"),"Remove"," ",c.a.createElement("button",{onClick:function(){a(e.product.id,e.quantity)}},"+")))})))))},h=function(){return c.a.createElement(_.a,null,c.a.createElement("div",null,c.a.createElement(R,null),c.a.createElement("div",null,c.a.createElement(v.a,{render:function(){return c.a.createElement(f,null)},path:"/products"}),c.a.createElement(v.a,{render:function(){return c.a.createElement(A,null)},path:"/cart/"}))))},S=function(){return c.a.createElement(h,null)},U=a(19),I=a(3),P={items:[],loading:!1,error:""},D=a(26),k=a(27),F={cart:[]},g=Object(U.b)({fetch_products:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:P,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case n.FETCH_PRODUCTS_BEGIN:return Object(I.a)(Object(I.a)({},e),{},{loading:!0,error:""});case n.FETCH_PRODUCTS_SUCCESS:return Object(I.a)(Object(I.a)({},e),{},{loading:!1,items:t.payload.products});case n.FETCH_PRODUCTS_FAILURE:return Object(I.a)(Object(I.a)({},e),{},{loading:!1,error:t.payload.error,items:[]});case n.SORT_BY_CATEGORY:return e.items.sort((function(e,a){var n=e.category.name.toUpperCase(),r=a.category.name.toUpperCase();if("asc"==t.payload.sortKey){if(n<r)return-1;if(n>r)return 1}else{if(n<r)return 1;if(n>r)return-1}return 0})),Object(I.a)(Object(I.a)({},e),{},{loading:!1,items:t.payload.products});case n.SORT_BY_PRICE:return e.items.sort((function(e,a){return"asc"==t.payload.sortKey?e.price-a.price:a.price-e.price})),Object(I.a)(Object(I.a)({},e),{},{loading:!1,items:t.payload.products});default:return e}},cart:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:F,t=arguments.length>1?arguments[1]:void 0,a=Object(k.a)(e.cart);switch(t.type){case E.ADD_TO_CART:var n=a.find((function(e){return e.product.id==t.payload.productId}));return n?t.payload.quantity=n.quantity++:a.push(Object(I.a)({},t.payload)),Object(I.a)(Object(I.a)({},e),{},{cart:a});case E.REMOVE_FROM_CART:var r=a.find((function(e){return e.product.id==t.payload.productId}));return r&&r.quantity>1?r.quantity=t.payload.quantity-1:a=a.filter((function(e){return e.product.id!=t.payload.productId})),Object(I.a)(Object(I.a)({},e),{},{cart:a});case E.UPDATE_CART_QUANTITY:var c=a.find((function(e){return e.product.id==t.payload.productId}));return c&&(c.quantity=t.payload.quantity+1),Object(I.a)(Object(I.a)({},e),{},{cart:a})}return e}}),Y=Object(U.c)(g,Object(U.a)(D.a));window.store=Y,u.a.render(c.a.createElement(b.a,{store:Y},c.a.createElement(S,null)),document.getElementById("root"))},6:function(e,t,a){e.exports={tableCell:"Products_tableCell__1vSL-",table:"Products_table__2qprs"}},7:function(e,t,a){e.exports={tableCell:"Cart_tableCell__2HEM_",table:"Cart_table__b5Lnm"}}},[[28,1,2]]]);
//# sourceMappingURL=main.9c106ea7.chunk.js.map